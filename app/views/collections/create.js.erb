<% if @collection.errors.any? %>
  $("#collectionForm").html('<%= escape_javascript(render partial:"collections/form", locals:{collection:@collection}) %>');
  $('#collection_name').data('content', '<%= raw @collection.errors.full_messages.join("<br>") %>');
  $('#collection_name').popover('show');
  $("#collection_name").focus();
  $("#collection_name").on('input', function() {
    $(this).popover('hide')
  });
<% else %>
  window.location='<%= collection_path(@collection) %>';  
<% end %>