--- !omap
- addresses#create:
  - !omap
    - verb: :POST
    - path: /api/addresses.json
    - versions:
      - v1
    - query: 
    - request_data:
        address: ! '{"code_name":"Office","address1":"21 rue d''Aboukir","zip":"75002","city":"Paris","country_id":514205109}'
    - response_data:
        address:
          id: 480832712
          code_name: Office
          address1: 21 rue d'Aboukir
          zip: '75002'
          city: Paris
          country: FR
          phones: []
    - code: '201'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :POST
    - path: /api/addresses.json
    - versions:
      - v1
    - query: 
    - request_data:
        address: ! '{}'
    - response_data:
        address1:
        - can't be blank
        zip:
        - can't be blank
        city:
        - can't be blank
    - code: '422'
    - show_in_doc: 0
    - recorded: true
- addresses#destroy:
  - !omap
    - verb: :DELETE
    - path: /api/addresses/480832711.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data: 
    - code: '204'
    - show_in_doc: 1
    - recorded: true
- addresses#index:
  - !omap
    - verb: :GET
    - path: /api/addresses.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
      - id: 480832711
        code_name: Chateau
        address1: 14 bd du Chateau
        address2: BP 212
        zip: '92200'
        city: Neuilly
        country: FR
        access_info: Code porte 1234
        is_default: 1
        phones: []
    - code: '200'
    - show_in_doc: 1
    - recorded: true
- addresses#show:
  - !omap
    - verb: :GET
    - path: /api/addresses/480832711.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        address:
          id: 480832711
          code_name: Chateau
          address1: 14 bd du Chateau
          address2: BP 212
          zip: '92200'
          city: Neuilly
          country: FR
          access_info: Code porte 1234
          is_default: 1
          phones: []
    - code: '200'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :GET
    - path: /api/addresses/123456.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        error: ActiveRecord::RecordNotFound
    - code: '404'
    - show_in_doc: 0
    - recorded: true
- addresses#update:
  - !omap
    - verb: :PUT
    - path: /api/addresses/480832711.json
    - versions:
      - v1
    - query: 
    - request_data:
        address: ! '{"address1":""}'
    - response_data:
        address1:
        - can't be blank
    - code: '422'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :PUT
    - path: /api/addresses/480832711.json
    - versions:
      - v1
    - query: 
    - request_data:
        address: ! '{"address2":"RDC porte gauche"}'
    - response_data: 
    - code: '204'
    - show_in_doc: 0
    - recorded: true
- home#index:
  - !omap
    - verb: :GET
    - path: /home/index
    - versions: []
    - query: ''
    - request_data: 
    - response_data: 
    - code: '200'
    - show_in_doc: 0
    - recorded: true
- lookup#index:
  - !omap
    - verb: :GET
    - path: /api/phones/0959497434/lookup.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        last_name: Larchevêque
        first_name: Eric
        address1: 14 boulevard du chateau
        zip: '92200'
        city: Neuilly-sur-seine
    - code: '200'
    - show_in_doc: 1
    - recorded: true
- orders#create:
  - !omap
    - verb: :POST
    - path: /api/orders.json
    - versions: []
    - query: 
    - request_data:
        order: ! '{"url":"http://www.rueducommerce.fr/productA"}'
    - response_data:
        order:
          uuid: 85cfcc4acd60b5c96c0996622ec35183
          state: ordering
          product:
            id: 815917824
            url: http://www.rueducommerce.fr/productA
            merchant:
              id: 878265302
              name: Rue du Commerce
          merchant:
            id: 878265302
            name: Rue du Commerce
    - code: '201'
    - show_in_doc: 0
    - recorded: true
- orders#show:
  - !omap
    - verb: :GET
    - path: /api/orders/abcdef.json
    - versions: []
    - query: ''
    - request_data: 
    - response_data:
        order:
          uuid: abcdef
          state: pending
          product:
            id: 815917823
            image_url: http://s1.static69.com/composant/images//produits/big/LEXAR-LJDS73-16GBASBEU.jpg
            name: Clé USB
            url: http://www.rueducommerce.fr/Composants/Cle-USB/Cles-USB/LEXAR/4867507-Cle-USB-3-0-Lexar-JumpDrive-S73-16Go.htm
            merchant:
              id: 878265302
              name: Rue du Commerce
          merchant:
            id: 878265302
            name: Rue du Commerce
    - code: '200'
    - show_in_doc: 0
    - recorded: true
- orders#update:
  - !omap
    - verb: :PUT
    - path: /api/callback/orders/abcdef.json
    - versions:
      - v1
    - query: 
    - request_data:
        data: ! '{"verb":"message","content":"Test","session":{"state":"pending"}}'
    - response_data: 
    - code: '204'
    - show_in_doc: 1
    - recorded: true
- payment_cards#create:
  - !omap
    - verb: :POST
    - path: /api/payment_cards.json
    - versions:
      - v1
    - query: 
    - request_data:
        payment_card: ! '{"user_id":745494609,"number":"1234123412341234","exp_month":"02","exp_year":"2015","cvv":"123"}'
    - response_data:
        payment_card:
          id: 727572249
          number: 1234XXXXXXXXXX34
          name: 
          exp_month: '02'
          exp_year: '2015'
    - code: '201'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :POST
    - path: /api/payment_cards.json
    - versions:
      - v1
    - query: 
    - request_data:
        payment_card: ! '{}'
    - response_data:
        number:
        - can't be blank
        - is the wrong length (should be 16 characters)
        exp_month:
        - can't be blank
        - is the wrong length (should be 2 characters)
        exp_year:
        - can't be blank
        - is the wrong length (should be 4 characters)
        cvv:
        - can't be blank
        - is the wrong length (should be 3 characters)
    - code: '422'
    - show_in_doc: 0
    - recorded: true
- payment_cards#destroy:
  - !omap
    - verb: :DELETE
    - path: /api/payment_cards/727572248.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data: 
    - code: '204'
    - show_in_doc: 1
    - recorded: true
- payment_cards#index:
  - !omap
    - verb: :GET
    - path: /api/payment_cards.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
      - id: 727572248
        number: 4970XXXXXXXXXX54
        name: HSBC
        exp_month: '2'
        exp_year: '2015'
    - code: '200'
    - show_in_doc: 1
    - recorded: true
- payment_cards#show:
  - !omap
    - verb: :GET
    - path: /api/payment_cards/727572248.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        payment_card:
          id: 727572248
          number: 4970XXXXXXXXXX54
          name: HSBC
          exp_month: '2'
          exp_year: '2015'
    - code: '200'
    - show_in_doc: 1
    - recorded: true
- phones#create:
  - !omap
    - verb: :POST
    - path: /api/phones.json
    - versions:
      - v1
    - query: 
    - request_data:
        phone: ! '{"number":"0640381383","line_type":1}'
    - response_data:
        phone:
          id: 752488299
          number: 0640381383
          line_type: 1
          address_id: 
    - code: '201'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :POST
    - path: /api/phones.json
    - versions:
      - v1
    - query: 
    - request_data:
        phone: ! '{}'
    - response_data:
        number:
        - can't be blank
        line_type:
        - can't be blank
        - is not included in the list
    - code: '422'
    - show_in_doc: 0
    - recorded: true
- phones#destroy:
  - !omap
    - verb: :DELETE
    - path: /api/phones/417264221.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data: 
    - code: '204'
    - show_in_doc: 1
    - recorded: true
- phones#index:
  - !omap
    - verb: :GET
    - path: /api/phones.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
      - id: 417264221
        number: 0940404040
        line_type: 0
        address_id: 480832711
      - id: 752488298
        number: 0646403619
        line_type: 1
        address_id: 
    - code: '200'
    - show_in_doc: 1
    - recorded: true
- phones#show:
  - !omap
    - verb: :GET
    - path: /api/phones/417264221.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        phone:
          id: 417264221
          number: 0940404040
          line_type: 0
          address_id: 480832711
    - code: '200'
    - show_in_doc: 1
    - recorded: true
- phones#update:
  - !omap
    - verb: :PUT
    - path: /api/phones/417264221.json
    - versions:
      - v1
    - query: 
    - request_data:
        phone: ! '{"number":""}'
    - response_data:
        number:
        - can't be blank
    - code: '422'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :PUT
    - path: /api/phones/417264221.json
    - versions:
      - v1
    - query: 
    - request_data:
        phone: ! '{"number":"0646403610"}'
    - response_data: 
    - code: '204'
    - show_in_doc: 0
    - recorded: true
- registrations#create:
  - !omap
    - verb: :POST
    - path: /api/users.json
    - versions:
      - v1
    - query: 
    - request_data:
        user: ! '{}'
    - response_data:
        email:
        - can't be blank
        first_name:
        - can't be blank
        last_name:
        - can't be blank
    - code: '422'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :POST
    - path: /api/users.json
    - versions:
      - v1
    - query: 
    - request_data:
        user: ! '{"email":"willfail@gmail.com","password":"tototo","password_confirmation":"tototo","first_name":"Joe","last_name":"Fail","civility":0,"nationality_id":514205109,"birthdate":"1973-09-30"}'
    - response_data:
        base:
        - ! 'Impossible to create user on Leetchi API. Error: {"origin":"remote","message":"Api
          failure","error_code":0,"user_message":"Api failure","type":"SystemError"}'
    - code: '422'
    - show_in_doc: 0
    - recorded: true
  - !omap
    - verb: :POST
    - path: /api/users.json
    - versions:
      - v1
    - query: 
    - request_data:
        user: ! '{"email":"user@gmail.com","first_name":"John","last_name":"Doe","addresses_attributes":[{"address1":"21
          rue d''Aboukir","zip":"75002","city":"Paris","phones_attributes":[{"number":"0140404040","line_type":0}]}],"phones_attributes":[{"number":"0640404040","line_type":1}]}'
    - response_data:
        user:
          id: 973902417
          email: user@gmail.com
          first_name: John
          last_name: Doe
          phones:
          - id: 752488300
            number: '0640404040'
            line_type: 1
            address_id: 
          addresses:
          - id: 480832712
            address1: 21 rue d'Aboukir
            zip: '75002'
            city: Paris
            country: FR
            is_default: 1
            phones:
            - id: 752488299
              number: '0140404040'
              line_type: 0
              address_id: 480832712
          payment_cards: []
        auth_token: zLfKxzsdLir4LsxEbpfx
    - code: '201'
    - show_in_doc: 0
    - recorded: true
- sessions#create:
  - !omap
    - verb: :POST
    - path: /api/users/sign_in.json
    - versions:
      - v1
    - query: 
    - request_data:
        email: elarch@gmail.com
        password: invalid
    - response_data:
        error: Invalid email or password.
    - code: '401'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :POST
    - path: /api/users/sign_in.json
    - versions:
      - v1
    - query: 
    - request_data:
        email: elarch@gmail.com
        password: tototo
    - response_data:
        user:
          id: 745494609
          email: elarch@gmail.com
          first_name: Eric
          last_name: Larchevêque
          phones:
          - id: 752488298
            number: 0646403619
            line_type: 1
            address_id: 
          addresses:
          - id: 480832711
            code_name: Chateau
            address1: 14 bd du Chateau
            address2: BP 212
            zip: '92200'
            city: Neuilly
            country: FR
            access_info: Code porte 1234
            is_default: 1
            phones:
            - id: 417264221
              number: 0940404040
              line_type: 0
              address_id: 480832711
          payment_cards:
          - id: 727572248
            number: 4970XXXXXXXXXX54
            name: HSBC
            exp_month: '2'
            exp_year: '2015'
        auth_token: JucC3NXdgLHb6v8xe1TX
    - code: '200'
    - show_in_doc: 0
    - recorded: true
- sessions#destroy:
  - !omap
    - verb: :POST
    - path: /api/users/sign_out.json
    - versions:
      - v1
    - query: 
    - request_data:
        email: invalid
    - response_data:
        error: Invalid email or password.
    - code: '401'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :POST
    - path: /api/users/sign_out.json
    - versions:
      - v1
    - query: 
    - request_data:
        email: elarch@gmail.com
    - response_data: {}
    - code: '200'
    - show_in_doc: 0
    - recorded: true
- users#destroy:
  - !omap
    - verb: :DELETE
    - path: /api/users/745494609.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data: 
    - code: '204'
    - show_in_doc: 1
    - recorded: true
- users#show:
  - !omap
    - verb: 
    - path: 
    - versions:
      - v1
    - query: 
    - request_data: 
    - response_data: 
    - code: 
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: 
    - path: 
    - versions:
      - v1
    - query: 
    - request_data: 
    - response_data: 
    - code: 
    - show_in_doc: 0
    - recorded: true
  - !omap
    - verb: :GET
    - path: /api/users/745494609.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        error: Invalid api key
    - code: '401'
    - show_in_doc: 0
    - recorded: true
  - !omap
    - verb: :GET
    - path: /api/users/745494609.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        error: Invalid api key
    - code: '401'
    - show_in_doc: 0
    - recorded: true
  - !omap
    - verb: :GET
    - path: /api/users/745494609.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        user:
          id: 745494609
          email: elarch@gmail.com
          first_name: Eric
          last_name: Larchevêque
          phones:
          - id: 752488298
            number: 0646403619
            line_type: 1
            address_id: 
          addresses:
          - id: 480832711
            code_name: Chateau
            address1: 14 bd du Chateau
            address2: BP 212
            zip: '92200'
            city: Neuilly
            country: FR
            access_info: Code porte 1234
            is_default: 1
            phones:
            - id: 417264221
              number: 0940404040
              line_type: 0
              address_id: 480832711
          payment_cards:
          - id: 727572248
            number: 4970XXXXXXXXXX54
            name: HSBC
            exp_month: '2'
            exp_year: '2015'
    - code: '200'
    - show_in_doc: 0
    - recorded: true
  - !omap
    - verb: :GET
    - path: /api/users/745494609.json
    - versions:
      - v1
    - query: ''
    - request_data: 
    - response_data:
        user:
          id: 745494609
          email: elarch@gmail.com
          first_name: Eric
          last_name: Larchevêque
          phones:
          - id: 752488298
            number: 0646403619
            line_type: 1
            address_id: 
          addresses:
          - id: 480832711
            code_name: Chateau
            address1: 14 bd du Chateau
            address2: BP 212
            zip: '92200'
            city: Neuilly
            country: FR
            access_info: Code porte 1234
            is_default: 1
            phones:
            - id: 417264221
              number: 0940404040
              line_type: 0
              address_id: 480832711
          payment_cards:
          - id: 727572248
            number: 4970XXXXXXXXXX54
            name: HSBC
            exp_month: '2'
            exp_year: '2015'
    - code: '200'
    - show_in_doc: 0
    - recorded: true
- users#update:
  - !omap
    - verb: :PUT
    - path: /api/users/745494609.json
    - versions:
      - v1
    - query: 
    - request_data:
        user: ! '{"email":"toto"}'
    - response_data:
        email:
        - is invalid
    - code: '422'
    - show_in_doc: 1
    - recorded: true
  - !omap
    - verb: :PUT
    - path: /api/users/745494609.json
    - versions:
      - v1
    - query: 
    - request_data:
        user: ! '{"first_name":"Peter"}'
    - response_data: 
    - code: '204'
    - show_in_doc: 0
    - recorded: true
